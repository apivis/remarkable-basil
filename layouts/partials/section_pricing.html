<section id="{{ .section.section_id }}" class="block pricing-block bg-{{ .section.bg }} outer">
    <div class="block-header inner-small">
    {{ if .section.title }}
    <h2 class="block-title">{{ .section.title }}</h2>
    {{ end }}
    {{ if .section.subtitle }}
    <p class="block-subtitle">
      {{ .section.subtitle | safeHTML }}
    </p>
    {{ end }}
  </div><!-- .block-header -->
  {{ if .section.pricingplans }}
  <div class="inner">
    <div class="grid">
      {{ range $plan := .section.pricingplans }}

      <div class="cell plan{{ if $plan.highlight }} highlight{{ end }}">
        <div class="plan-inside">
        <h3 class="plan-name">{{ $plan.title }}</h3>
        {{ if $plan.price }}
        <div class="plan-price">{{ $plan.price }}</div>
        {{ end }}
        <div class="plan-details">
          {{ partial "markdownify-block" $plan.details }}
          
          <form name="form_name" id="form" class="subscribe-form">
          
          <p>Fill in your GitHub user and token to secure your Rodened server.</p>

            <div class="form-row"><label>
              <span class="screen-reader-text">GitHub User</span>
<input type="text" class="subscribe-email" name="github_user" id="githubuser" placeholder="Enter GitHub User" style="margin-bottom:10px" />
              </label>
            </div>
          
              <div class="form-row"><label>
              <span class="screen-reader-text">GitHub Token</span>
<input type="text" class="subscribe-email" name="github_token" id="githubtoken" placeholder="Enter GitHub Token" style="margin-bottom:10px" />
              </label>
            </div>
            
          
   <input type="submit" name="submit_class" id="btn_class" value="Subscribe" />
            
   <input type="hidden" name="partiallyid" id="partiallyid" value="{{ $plan.partiallyid }}" />         
   </form>

   
        </div>
        {{ if $plan.actions }}
          {{ $include_dict := dict "actions" $plan.actions }}
          {{ partial "cta_buttons.html" $include_dict }}
        {{ end }}
        </div><!-- .plan-inside -->
      </div><!-- .cell -->

      {{ end }}
    </div><!-- .grid -->
  </div><!-- .inner -->
  {{ end }}
  <script type="text/javascript"> 
 function logSubmit(event) {
    event.preventDefault();
    var github_token = document.getElementById("githubtoken").value;
    var github_user = document.getElementById("githubuser").value;
    var offer = document.getElementById("partiallyid").value;
    if (validation()) // Calling validation function
    {
      const Http = new XMLHttpRequest();
      const url='https://demo.partial.ly/checkout?offer='+ offer + '&meta[github_user]=' + github_user + '&meta[github_token]=' + github_token + '&meta[description]=Subscribe';

      console.log('url ', url);
      window.location = url;
    }
  }
  const form = document.getElementById('form');

  form.addEventListener('submit', logSubmit);
  function validation() {
    var github_user = document.getElementById("githubuser").value;
    var github_token = document.getElementById("githubtoken").value;
    //var emailReg = /^([w-.]+@([w-]+.)+[w-]{2,4})?$/;
    if (github_user === '' || github_token === '') {
      alert("Please fill in all fields!");
      return false;
    } else {
      return true;
    }
  }
</script>
</section><!-- .block -->
